---
layout: default
---

{% if page.header.overlay_color or page.header.overlay_image or page.header.image %}
  {% include page__hero.html %}
{% endif %}

{% if page.url != "/" and site.breadcrumbs %}
  {% unless paginator %}
    {% include breadcrumbs.html %}
  {% endunless %}
{% endif %}

<div id="main" role="main">
  {% include sidebar.html %}

  <div class="archive">
    {% unless page.header.overlay_color or page.header.overlay_image %}
      <h1 class="page__title">{{ page.title }}</h1>
    {% endunless %}

    {{ content }}

    {% if page.personal_search %}
      <div class="archive__search">
        <label class="sr-only" for="personal-search-input">{{ page.personal_search_label | default: "Search personal posts" }}</label>
        <input id="personal-search-input" type="search" placeholder="{{ page.personal_search_placeholder | default: "Search personal posts..." }}" autocomplete="off" aria-controls="personal-search-results" data-search-src="{{ '/search-personal.json' | relative_url }}">
      </div>
      <div id="personal-search-results" class="archive__search-results" aria-live="polite" hidden></div>
    {% endif %}

    {%- comment -%}
      Build our post list, optionally filtering by page.filter_category
    {%- endcomment -%}
    {% assign the_posts = site.posts %}
    {% if page.filter_category %}
      {% assign the_posts = the_posts
           | where_exp: "post", "post.categories contains page.filter_category" %}
    {% endif %}

    {%- capture written_year -%}'None'{%- endcapture -%}
    {% if page.personal_search %}<div id="personal-search-list">{% endif %}
    {% for post in the_posts %}
      {% capture year %}{{ post.date | date: '%Y' }}{% endcapture %}
      {% if year != written_year %}
        <h2 id="{{ year | slugify }}" class="archive__subtitle">{{ year }}</h2>
        {% capture written_year %}{{ year }}{% endcapture %}
      {% endif %}
      {% include archive-single.html %}
    {% endfor %}
    {% if page.personal_search %}
      </div>
      <script src="{{ '/assets/js/personal-search.js' | relative_url }}" defer></script>
    {% endif %}
  </div>
</div>
